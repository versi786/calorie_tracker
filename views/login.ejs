<!DOCTYPE html>
<html>
  <head>
    <title>Login</title>
    <link rel="stylesheet" href='/stylesheets/bootstrap.min.css' />
    <link rel='stylesheet' href='/stylesheets/login.css' />
    <link rel='stylesheet' href='/stylesheets/globalStyle.css' />
    <!-- JQuery -->
    <script src="/javascripts/jquery-1.12.2.min.js"></script>
    <!-- Parsley -->
    <script src='/javascripts/parsley.js'></script>
  </head>

  <body>

    <script src='/javascripts/resolveLoginCredentialsFacebook.js'></script>

    <div class="container">
    <div class="content">

      <div class="alert alert-danger hidden" role="alert">
        <a href="#" class="alert-link">Login Unsuccesful -- Check your username/password</a>
      </div>

      <div class="row">
        <div id="login-form" class='col-sm-offset-4 col-sm-4'>
          <div>
            <h2 id ="header">Login</h2>
            <%if (error) { %>
            <font color="red"><%= error %></font><p>
            <% } %>
            <form action="/login" method="post" data-parsley-validate id="login-form-root">
              <fieldset>
                <div class="form-group">
                  <label for='username'>Username:</label>
                  <input class = "form-control" id="username" type="text" name="username"
                  data-parsley-required minlength="4">
                </div>
                <div class="form-group">
                  <label for='password'>Password:</label>
                  <input class = "form-control" id="password" type="password" name="password"
                  data-parsley-required minlength="4">
                </div>
                <button class="btn primary btn-submit" type="submit">Sign in</button>
              </fieldset>
            </form>
            <p>
              <a href = "/signup">Sign up</a>
            </p>
          </div>
           <!-- Facebook Login Button -->
          <div id = "facebook_button">
            <div class="fb-login-button" data-max-rows="1" data-size="xlarge" data-show-faces="false"
            data-auto-logout-link="false" onlogin='storeCredentials();' data-scope='public_profile'>
            </div>
          </div>

        <script>
            $(function () {
              $('#login-form-root').parsley()
              .on('form:submit', function() {
                // Any given field is validated - show warning if issues
                var ok = $('.parsley-error').length === 0;
                $('.alert-danger').toggleClass('hidden', ok);
                return ok;
              });
            });
        </script>


      </div>
    </div>
  </div>
  </body>


</html>
